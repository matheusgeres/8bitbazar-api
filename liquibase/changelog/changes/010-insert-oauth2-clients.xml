<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.25.xsd">

    <changeSet id="010-insert-oauth2-clients" author="eightbitbazar">

        <!-- Web Client -->
        <insert tableName="oauth2_registered_client">
            <column name="id" value="web-client-001"/>
            <column name="client_id" value="eightbitbazar-web"/>
            <column name="client_secret" value="{noop}web-secret"/>
            <column name="client_name" value="8BitBazar Web Client"/>
            <column name="client_authentication_methods" value="client_secret_basic,client_secret_post"/>
            <column name="authorization_grant_types" value="authorization_code,refresh_token,client_credentials"/>
            <column name="redirect_uris" value="http://localhost:3000/callback"/>
            <column name="post_logout_redirect_uris" value="http://localhost:3000/"/>
            <column name="scopes" value="openid,profile,read,write"/>
            <column name="client_settings"><![CDATA[{"@class":"java.util.Collections$UnmodifiableMap","settings.client.require-proof-key":false,"settings.client.require-authorization-consent":false}]]></column>
            <column name="token_settings"><![CDATA[{"@class":"java.util.Collections$UnmodifiableMap","settings.token.reuse-refresh-tokens":true,"settings.token.id-token-signature-algorithm":["org.springframework.security.oauth2.jose.jws.SignatureAlgorithm","RS256"],"settings.token.access-token-time-to-live":["java.time.Duration",3600.000000000],"settings.token.access-token-format":{"@class":"org.springframework.security.oauth2.server.authorization.settings.OAuth2TokenFormat","value":"self-contained"},"settings.token.refresh-token-time-to-live":["java.time.Duration",604800.000000000],"settings.token.authorization-code-time-to-live":["java.time.Duration",300.000000000],"settings.token.device-code-time-to-live":["java.time.Duration",300.000000000]}]]></column>
        </insert>

        <!-- Mobile Client -->
        <insert tableName="oauth2_registered_client">
            <column name="id" value="mobile-client-001"/>
            <column name="client_id" value="eightbitbazar-mobile"/>
            <column name="client_secret" value="{noop}mobile-secret"/>
            <column name="client_name" value="8BitBazar Mobile Client"/>
            <column name="client_authentication_methods" value="client_secret_post"/>
            <column name="authorization_grant_types" value="authorization_code,refresh_token"/>
            <column name="redirect_uris" value="br.com.eightbitbazar://callback"/>
            <column name="scopes" value="openid,profile,read,write"/>
            <column name="client_settings"><![CDATA[{"@class":"java.util.Collections$UnmodifiableMap","settings.client.require-proof-key":true,"settings.client.require-authorization-consent":false}]]></column>
            <column name="token_settings"><![CDATA[{"@class":"java.util.Collections$UnmodifiableMap","settings.token.reuse-refresh-tokens":true,"settings.token.id-token-signature-algorithm":["org.springframework.security.oauth2.jose.jws.SignatureAlgorithm","RS256"],"settings.token.access-token-time-to-live":["java.time.Duration",3600.000000000],"settings.token.access-token-format":{"@class":"org.springframework.security.oauth2.server.authorization.settings.OAuth2TokenFormat","value":"self-contained"},"settings.token.refresh-token-time-to-live":["java.time.Duration",2592000.000000000],"settings.token.authorization-code-time-to-live":["java.time.Duration",300.000000000],"settings.token.device-code-time-to-live":["java.time.Duration",300.000000000]}]]></column>
        </insert>

    </changeSet>

</databaseChangeLog>
